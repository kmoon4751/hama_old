--테이블 삭제
drop table estimate;

--시퀀스삭제
drop sequence estimate_estimate_id_seq;

create table estimate (
    estimate_id      number(10), -- pk,
    board_id           number(10), -- requestBoard 테이블의 외래키,
    member_id        number(10), -- member 테이블의 외래키,       -- 올린맴버아이디
    work_member_id   number(10) not null,     -- 하마의 아이디
    esti_gubun      varchar2(20)not null, --견적서 작성의 총 비용과 시간 당 구분
    esti_price      number(10)not null,   --견적서 작성의 가격
    esti_file      BLOB,         --견적서 작성의 파일
    cdate               timestamp default systimestamp,         --생성일시
    udate               timestamp default systimestamp          --수정일시
 ); 
 
--기본키생성
alter table estimate add Constraint estimate_estimate_id_pk primary key (estimate_id);

--외래키생성
alter table estimate add constraint estimate_board_id_fk foreign key(board_id) references requestBoard(board_id);
alter table estimate add constraint estimate_member_id_fk foreign key(member_id) references member(member_id);

--시퀀스
create sequence estimate_estimate_id_seq;

--샘플데이터 of estimate
insert into estimate (estimate_id, board_id ,member_id, work_member_id, esti_gubun, esti_price)
    values(estimate_estimate_id_seq.nextval, 1, 1, 1,'3000원/1000원', 3000);
insert into estimate (estimate_id, board_id ,member_id, work_member_id, esti_gubun, esti_price)
    values(estimate_estimate_id_seq.nextval, 2, 2, 2,'9000원/3000원', 9000);

select * from estimate;
commit;